{% liquid
  assign pricing_cards = nil
  if product and product.metafields.custom.pricing_cards and product.metafields.custom.pricing_cards.value != blank
    assign pricing_cards = product.metafields.custom.pricing_cards.value
  endif

  assign secure_block = nil
  if product and product.metafields.custom.secure_checkout_block and product.metafields.custom.secure_checkout_block.value != blank
    assign secure_block = product.metafields.custom.secure_checkout_block.value
  endif
%}

<section
  id="{{ section.id }}-pricing"
  class="sw-bg-[#05080D] sw-text-white sw-py-10 xl:sw-py-16"
  style="background-color: {{ section.settings.section_bg }}; color: {{ section.settings.section_text_color }};"
>
  <div class="sw-max-w-[1110px] sw-mx-auto sw-px-4 lg:sw-px-0">

    {%- if section.settings.heading != blank -%}
      <h2 class="sw-text-center sw-text-[22px] xl:sw-text-[48px] sw-font-heading sw-leading-tight sw-font-semibold sw-mb-7 xl:sw-mb-[76px]">
        {{ section.settings.heading }}
      </h2>
    {%- endif -%}

    {%- if pricing_cards and pricing_cards.size > 0 -%}
      <div class="sw-grid sw-grid-cols-1 xl:sw-grid-cols-3 sw-gap-11 xl:sw-gap-10 sw-mb-[18px] xl:sw-mb-10">

        {%- for card in pricing_cards -%}
          {%- comment -%}
            Feature array build
          {%- endcomment -%}
          {%- assign features_raw = '' -%}
          {%- if card.feature_1 != blank -%}
            {%- assign features_raw = features_raw | append: card.feature_1 | append: '||' -%}
          {%- endif -%}
          {%- if card.feature_2 != blank -%}
            {%- assign features_raw = features_raw | append: card.feature_2 | append: '||' -%}
          {%- endif -%}
          {%- if card.feature_3 != blank -%}
            {%- assign features_raw = features_raw | append: card.feature_3 | append: '||' -%}
          {%- endif -%}
          {%- assign features = features_raw | split: '||' -%}

          <div
            class="sw-relative sw-rounded-[16px] sw-border-2 sw-bg-[#1E1E1E] sw-px-2 sw-pt-[25px] sw-pb-2 sw-flex sw-flex-col sw-gap-4 sw-shadow-[0_18px_40px_rgba(0,0,0,0.75)]"
            style="border-color: {{ card.border_color | default: '#383838' }};"
          >
            {%- if card.label != blank -%}
              <div class="sw-absolute sw--top-[13px] sw-left-1/2 sw--translate-x-1/2">
                <div
                  class="sw-inline-flex sw-items-center sw-justify-center sw-rounded-full sw-px-4 sw-py-1 sw-text-[12px] sw-font-bold sw-text-[#031015]"
                  style="background: {{ card.accent_color | default: '#01C5E3' }};"
                >
                  {{ card.label }}
                </div>

                {%- if card.show_crown -%}
                  <span class="sw-absolute sw-top-[-20px] sw-left-1/2 sw--translate-x-1/2">
                    <!-- Best value crown icon -->
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                         xmlns="http://www.w3.org/2000/svg">
                      <path d="M19.8 19.1999H4.2C3.87 19.1999 3.6 19.4699 3.6 19.7999V20.9999C3.6 21.3299 3.87 21.5999 4.2 21.5999H19.8C20.13 21.5999 20.4 21.3299 20.4 20.9999V19.7999C20.4 19.4699 20.13 19.1999 19.8 19.1999ZM22.2 7.1999C21.2063 7.1999 20.4 8.00615 20.4 8.9999C20.4 9.26615 20.46 9.51365 20.565 9.7424L17.85 11.3699C17.2725 11.7149 16.5263 11.5199 16.1925 10.9349L13.1363 5.5874C13.5375 5.2574 13.8 4.7624 13.8 4.1999C13.8 3.20615 12.9938 2.3999 12 2.3999C11.0063 2.3999 10.2 3.20615 10.2 4.1999C10.2 4.7624 10.4625 5.2574 10.8638 5.5874L7.8075 10.9349C7.47375 11.5199 6.72375 11.7149 6.15 11.3699L3.43875 9.7424C3.54 9.5174 3.60375 9.26615 3.60375 8.9999C3.60375 8.00615 2.7975 7.1999 1.80375 7.1999C0.81 7.1999 0 8.00615 0 8.9999C0 9.99365 0.80625 10.7999 1.8 10.7999C1.8975 10.7999 1.995 10.7849 2.08875 10.7699L4.8 17.9999H19.2L21.9113 10.7699C22.005 10.7849 22.1025 10.7999 22.2 10.7999C23.1938 10.7999 24 9.99365 24 8.9999C24 8.00615 23.1938 7.1999 22.2 7.1999Z"
                            fill="#EBB658"/>
                    </svg>
                  </span>
                {%- endif -%}
              </div>
            {%- endif -%}

            <!-- Top content: icon + title + price -->
            <div class="sw-px-4 sw-pb-9 xl:sw-pb-6">
              <div class="sw-flex sw-gap-2 sw-items-center sw-mb-2">
                {%- if card.icon != blank -%}
                  <div class="sw-w-10 sw-h-10 sw-mb-3">
                    <img
                      src="{{ card.icon | image_url: width: 120 }}"
                      alt="{{ card.title | escape }}"
                      class="sw-w-10 sw-h-10 sw-object-contain"
                    >
                  </div>
                {%- endif -%}

                <h3 class="sw-text-[20px] xl:sw-text-[24px] sw-font-semibold">
                  {{ card.title }}
                </h3>
              </div>

              <div>
                <div class="sw-flex sw-items-baseline sw-gap-1">
                  <span class="sw-text-[24px] xl:sw-text-[32px] sw-font-bold sw-font-heading">
                    {{ card.price }}
                  </span>
                  {%- if card.price_suffix != blank -%}
                    <span class="sw-text-[16px] sw-text-[#ffffff]">
                      {{ card.price_suffix }}
                    </span>
                  {%- endif -%}
                </div>
                {%- if card.trial_text != blank -%}
                  <p
                    class="sw-text-[14px] sw-font-bold sw-mt-2"
                    style="color: {{ card.accent_color | default: '#01C5E3' }};"
                  >
                    {{ card.trial_text }}
                  </p>
                {%- endif -%}
              </div>
            </div>

            <!-- Inner box: refund pill + features + button -->
            <div class="sw-relative">
              {%- if card.refund_text != blank -%}
                <div class="sw-absolute sw--top-[13px] sw-left-1/2 sw--translate-x-1/2 sw-z-[2] sw-w-[86%]">
                  <div
                    class="sw-inline-flex sw-items-center sw-justify-center sw-rounded-full sw-px-5 sw-py-1 sw-text-[14px] sw-font-semibold sw-text-[#031015] xl:sw-px-3"
                    style="background: {{ card.accent_color | default: '#01C5E3' }};"
                  >
                    {{ card.refund_text }}
                  </div>
                </div>
              {%- endif -%}

              <div
                class="sw-rounded-[18px] sw-border sw-pt-7 sw-px-4 sw-pb-4 sw-space-y-2 sw-text-[13px]"
                style="
                  border-color: {{ card.accent_color | default: '#01C5E3' }};
                  background: {{ card.inner_bg_color | default: '#020617' }};
                  {%- if card.inner_bg_image != blank -%}
                    background-image: url('{{ card.inner_bg_image | image_url: width: 600 }}');
                    background-size: cover;
                    background-repeat: no-repeat;
                  {%- endif -%}
                "
              >
                {%- for feature in features -%}
                  {%- if feature != blank -%}
                    <div class="sw-flex sw-items-center sw-gap-2">
                      <span class="sw-mt-[3px]">
                        <svg xmlns="http://www.w3.org/2000/svg" width="13" height="10" viewBox="0 0 13 10" fill="none">
                          <path d="M4.54601 10L0 5.25988L1.1365 4.07484L4.54601 7.62994L11.8635 0L13 1.18503L4.54601 10Z" fill="white"/>
                        </svg>
                      </span>
                      <span class="sw-text-[14px]">
                        {{ feature }}
                      </span>
                    </div>
                  {%- endif -%}
                {%- endfor -%}

                {%- if card.btn_label != blank -%}
                  <div class="sw-pt-6">
                    <a
                      href="{{ card.btn_link | default: '#' }}"
                      class="sw-inline-flex sw-w-full sw-items-center sw-justify-center sw-rounded-[16px] sw-text-[#031015] sw-text-[16px] sw-font-bold sw-py-2 sw-px-3 sw-gap-2 hover:sw-brightness-110 sw-transition sw-duration-150"
                      style="background: {{ card.btn_bg_color | default: '#01C5E3' }};"
                    >
                      {{ card.btn_label }}
                      <span>➜</span>
                    </a>
                  </div>
                {%- endif -%}
              </div>
            </div>
          </div>
        {%- endfor -%}

      </div>
    {%- endif -%}

    {%- comment -%} SAFE & SECURE CHECKOUT BOX {%- endcomment -%}
    <div class="sw-rounded-2xl sw-border-[#D9D9D9] sw-border-2 sw-bg-[#111827] sw-px-[14px] sw-py-[10px] xl:sw-px-6 xl:sw-py-6 sw-flex sw-flex-col sw-gap-4 xl:sw-gap-10 sw-items-start xl:sw-items-center xl:sw-flex-col">
      <div class="sw-w-full">
        <p class="sw-text-[16px] sw-leading-normal sw-font-heading sw-font-semibold sw-mb-3 xl:sw-text-[28px]">
          {{ secure_block.title | default: section.settings.secure_title }}
        </p>

        {%- assign secure_subtitle_text = secure_block.subtitle | default: section.settings.secure_subtitle -%}
        {%- if secure_subtitle_text != blank -%}
          <p class="sw-text-xs sw-items-center sw-text-[#fff] sw-flex sw-gap-2 xl:sw-text-[18px]">
            <span>{{ secure_subtitle_text }}</span>
            <span class="sw-flex sw-items-center sw-gap-1">
              {# yaha Razorpay ka icon svg as-it-is daal do #}
              <!-- Razorpay SVG -->
              <!-- ... tumhara existing SVG code ... -->
            </span>
          </p>
        {%- endif -%}
      </div>

      <div class="sw-flex sw-items-center sw-gap-2 sw-w-full sw-justify-between xl:sw-items-end xl:sw-text-right">
        <!-- Left: payment method logos (UPI, Visa, Mastercard etc.) -->
        <!-- yaha bhi apna existing SVG / img icons as-is paste kar do -->
      </div>
    </div>

  </div>
</section>
 


<style>
  #{{ section.id }}-pricing {
    padding-top: {{ section.settings.mobile_padding_top }}px;
    padding-bottom: {{ section.settings.mobile_padding_bottom }}px;
  }
 

  @media (min-width: 1200px) {
    #{{ section.id }}-pricing {
      padding-top: {{ section.settings.desktop_padding_top }}px;
      padding-bottom: {{ section.settings.desktop_padding_bottom }}px;
    }
     .tradeedge-wrap svg{
    width: 100%;
        height: auto;
  }
  }
</style>


{% schema %}
{
  "name": "Pricing – 3 fixed cards",
  "settings": [
    {
      "type": "color",
      "label": "section background color",
      "id": "section_bg",
      "default": "#1E1E1E"
    },
    {
      "type": "color",
      "label": "section text color",
      "id": "section_text_color",
      "default": "#ffffff" 
    },
    {
      "type": "range",
      "id": "mobile_padding_top",
      "label": "Mobile padding top (px)",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "mobile_padding_bottom",
      "label": "Mobile padding bottom (px)",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 40
    },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Explore Our Plans" },

    { "type": "header", "content": "Secure checkout strip" },
    { "type": "text", "id": "secure_title", "label": "Title", "default": "Safe and Secure Checkout" },
    { "type": "text", "id": "secure_subtitle", "label": "Subtitle", "default": "Payments are processed by" },
    { "type": "text", "id": "payment_text", "label": "Payment text", "default": "We accept the following payment methods" },
    { "type": "checkbox", "id": "show_upi", "label": "Show UPI", "default": true },
    { "type": "checkbox", "id": "show_visa", "label": "Show VISA", "default": true },
    { "type": "checkbox", "id": "show_mastercard", "label": "Show Mastercard", "default": true },
    { "type": "checkbox", "id": "show_custom_logo", "label": "Show extra payment logo image", "default": false },
    { "type": "image_picker", "id": "custom_logo", "label": "Extra payment logo" },

    { "type": "header", "content": "Card 1 – Monthly" },
    { "type": "text", "id": "card1_label", "label": "Top label", "default": "STARTER PLAN" },
    { "type": "image_picker", "id": "card1_icon", "label": "Card 1 icon image" },
    { "type": "text", "id": "card1_title", "label": "Title", "default": "Monthly Access" },
    { "type": "text", "id": "card1_price", "label": "Price", "default": "₹ 499.00" },
    { "type": "text", "id": "card1_suffix", "label": "Price suffix", "default": "/ month" },
    { "type": "text", "id": "card1_trial", "label": "Trial line", "default": "Get 7 days free trial included" },
    { "type": "text", "id": "card1_refund", "label": "Refund pill text", "default": "No questions asked 30 days refund" },
    { "type": "text", "id": "card1_feature1", "label": "Feature 1", "default": "Get complete access of TradeEdge Pro" },
    { "type": "text", "id": "card1_feature2", "label": "Feature 2", "default": "Lorem ipsum dolor sit amet" },
    { "type": "text", "id": "card1_feature3", "label": "Feature 3", "default": "Lorem ipsum dolor sit amet" },
    { "type": "text", "id": "card1_btn_label", "label": "Button label", "default": "START 7-DAY FREE TRIAL" },
    { "type": "url", "id": "card1_btn_link", "label": "Button link" },
    { "type": "color", "id": "card1_accent", "label": "Accent color", "default": "#00D2C6" },
    { "type": "color", "id": "card1_inner_bg", "label": "Inner box background", "default": "#00D2C6" },
    { "type": "color", "id": "card1_border_color", "label": "Outer border color", "default": "#00D2C6" },
    { "type": "color", "id": "card1_btn_bg", "label": "Button background", "default": "#00F0CF" },
    { "type": "image_picker", "id": "card1_inner_bg_img", "label": "Card 1 Bg image" },

    { "type": "header", "content": "Card 2 – Quarterly (middle)" },
    { "type": "text", "id": "card2_label", "label": "Top label", "default": "MOST POPULAR" },
    { "type": "image_picker", "id": "card2_icon", "label": "Card 2 icon image" },
    { "type": "text", "id": "card2_title", "label": "Title", "default": "Quarterly Access" },
    { "type": "text", "id": "card2_price", "label": "Price", "default": "₹ 1,099.00" },
    { "type": "text", "id": "card2_suffix", "label": "Price suffix", "default": "/ 90 days" },
    { "type": "text", "id": "card2_trial", "label": "Trial line", "default": "Get 30 days free trial included" },
    { "type": "text", "id": "card2_refund", "label": "Refund pill text", "default": "No questions asked 30 days refund" },
    { "type": "text", "id": "card2_feature1", "label": "Feature 1", "default": "Get complete access of TradeEdge Pro" },
    { "type": "text", "id": "card2_feature2", "label": "Feature 2", "default": "Lorem ipsum dolor sit amet" },
    { "type": "text", "id": "card2_feature3", "label": "Feature 3", "default": "Lorem ipsum dolor sit amet" },
    { "type": "text", "id": "card2_btn_label", "label": "Button label", "default": "START 30-DAY FREE TRIAL" },
    { "type": "url", "id": "card2_btn_link", "label": "Button link" },
    { "type": "color", "id": "card2_accent", "label": "Accent color", "default": "#00C4FF" },
    { "type": "color", "id": "card2_inner_bg", "label": "Inner box background", "default": "#00C4FF" },
    { "type": "color", "id": "card2_border_color", "label": "Outer border color", "default": "#00C4FF" },
    { "type": "color", "id": "card2_btn_bg", "label": "Button background", "default": "#00E5FF" },
    { "type": "image_picker", "id": "card2_inner_bg_img", "label": "Card 2 Bg image" },

    { "type": "header", "content": "Card 3 – Lifetime" },
    { "type": "text", "id": "card3_label", "label": "Top label", "default": "BEST VALUE" },
    { "type": "image_picker", "id": "card3_icon", "label": "Card 3 icon image" },
    { "type": "text", "id": "card3_title", "label": "Title", "default": "Lifetime Access" },
    { "type": "text", "id": "card3_price", "label": "Price", "default": "₹ 4,999.00" },
    { "type": "text", "id": "card3_suffix", "label": "Price suffix", "default": "One-Time" },
    { "type": "text", "id": "card3_trial", "label": "Trial / sub text", "default": "Unlimited access for life" },
    { "type": "text", "id": "card3_refund", "label": "Refund pill text", "default": "No questions asked 30 days refund" },
    { "type": "text", "id": "card3_feature1", "label": "Feature 1", "default": "Get complete access of TradeEdge Pro" },
    { "type": "text", "id": "card3_feature2", "label": "Feature 2", "default": "Lorem ipsum dolor sit amet" },
    { "type": "text", "id": "card3_feature3", "label": "Feature 3", "default": "Lorem ipsum dolor sit amet" },
    { "type": "text", "id": "card3_btn_label", "label": "Button label", "default": "GET LIFETIME ACCESS" },
    { "type": "url", "id": "card3_btn_link", "label": "Button link" },
    { "type": "color", "id": "card3_accent", "label": "Accent color", "default": "#A855F7" },
    { "type": "color", "id": "card3_inner_bg", "label": "Inner box background", "default": "#A855F7" },
    { "type": "color", "id": "card3_border_color", "label": "Outer border color", "default": "#A855F7" },
    { "type": "color", "id": "card3_btn_bg", "label": "Button background", "default": "#C084FC" },
    { "type": "image_picker", "id": "card3_inner_bg_img", "label": "Card 3 Bg image" }
  ],
  "presets": [
    {
      "name": "Pricing – 3 fixed cards"
    }
  ]
}
{% endschema %}
